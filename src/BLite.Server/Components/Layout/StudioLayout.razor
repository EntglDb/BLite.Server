@inherits LayoutComponentBase
@inject StudioService Studio
@inject NavigationManager Nav

@if (Studio.IsSetupComplete)
{
<div class="studio-root">
    <nav class="studio-sidebar">
        <div class="studio-brand">
            <span class="brand-icon">â—†</span> BLite Studio
        </div>
        <StudioNavMenu />
        <div class="sidebar-footer">
            <a href="/scalar/v1" target="_blank" rel="noopener noreferrer"
               class="source-badge" title="Interactive REST API (Scalar UI)">
                âš¡ REST API
            </a>
            <a href="/openapi/v1.json" target="_blank" rel="noopener noreferrer"
               class="source-badge" title="OpenAPI spec (JSON)">
                ðŸ“„ OpenAPI
            </a>
            <a href="@Studio.GetSourceUrl()" target="_blank" rel="noopener noreferrer"
               class="source-badge" title="Source code â€” AGPL-3.0 Â§13">
                ðŸ”“ Source Code
            </a>
        </div>
    </nav>
    <main class="studio-main">
        @Body
    </main>
</div>
}

@code {
    protected override void OnInitialized()
    {
        if (!Studio.IsSetupComplete)
            Nav.NavigateTo("/setup");
    }
}
